# Flat js

flow flattening for javascript

--

## Motivation
1. Learn how javascript internally works, and evaluate I did not learn it wrongly
2. Bypass the csp `eval` restriction with minimal size overhead.
3. Obfuscate codes across all functions for obfuscation purpose

## Design
Emulate a javascript interpreter that interpret middle result of javascript.
First baking all code to fixed code layout, and then execute them with a small enough interpreter.

1. code 
2. (parsing)
   1. code parts(assemble control flow) 
3. (generate opcodes from instruction)
   1. opcode(computations)
4. (generate snippet together with the interpreter)
   1. interpreted by interpreter

The interpreter isn't execute code directly, it instead execute opcodes generated by previous process.

### note

this plugin works only before es2015, since the let declaration introduced in es2016 actully created a IIFE, and will break the output result
